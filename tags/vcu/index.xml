<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>VCU on Hank Tech Lab</title><link>https://hanketgithub.github.io/tags/vcu/</link><description>Recent content in VCU on Hank Tech Lab</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 30 Jul 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://hanketgithub.github.io/tags/vcu/index.xml" rel="self" type="application/rss+xml"/><item><title>VCU 開發進度總結 — 2025-08-01</title><link>https://hanketgithub.github.io/tech/vcu_progress/</link><pubDate>Wed, 30 Jul 2025 00:00:00 +0000</pubDate><guid>https://hanketgithub.github.io/tech/vcu_progress/</guid><description>更新概要（2025-07-30） 已確認 Allegro encoder callback 無法繼續產出 ES 是因為未在 callback 中呼叫 AL_Encoder_PutStreamBuffer() 歸還使用過的 bitstream buffer。此行為違反一般 callback 使用常識，但確實為必要操作。
Fetch ES Output 機制修正（2025-07-30） 原本的 callback 實作錯誤，導致 encoder 卡住無法繼續輸出 ES。經查證，必須在 callback return 前 明確呼叫 AL_Encoder_PutStreamBuffer() 歸還 bitstream buffer，encoder 才能繼續使用該 buffer 進行編碼。
修正後範例： void myEndEncoding(void *userParam, AL_TBuffer *pStream, AL_TBuffer const *pSrc, int iLayerID) { uint8_t *data = AL_Buffer_GetData(pStream); AL_TPictureMetaData *pPicMeta = (AL_TPictureMetaData *) AL_Buffer_GetMetaData(pStream, AL_META_TYPE_PICTURE); printf(&amp;#34;Picture Type %s %s\n&amp;#34;, PictTypeToString(pPicMeta-&amp;gt;eType).c_str(), pPicMeta-&amp;gt;bSkipped ? &amp;#34;is skipped&amp;#34; : &amp;#34;&amp;#34;); AL_TStreamMetaData *pStreamMeta = (AL_TStreamMetaData *) AL_Buffer_GetMetaData(pStream, AL_META_TYPE_STREAM); for (uint16_t i = 0; i &amp;lt; pStreamMeta-&amp;gt;uNumSection; i++) { AL_TStreamSection section = pStreamMeta-&amp;gt;pSections[i]; printf(&amp;#34;Section %d: size=%d layer=%d, type=%s\n&amp;#34;, i, section.</description></item></channel></rss>